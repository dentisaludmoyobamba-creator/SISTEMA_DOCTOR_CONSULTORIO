{"ast":null,"code":"// Servicio para gestión de usuarios (CRUD)\nconst API_URL = 'https://usuarios-1090334808863.us-central1.run.app';\nclass UsersService {\n  constructor() {\n    this.authService = null;\n  }\n\n  // Inyectar authService para obtener token\n  setAuthService(authService) {\n    this.authService = authService;\n  }\n\n  // Headers base para las peticiones\n  getHeaders(includeAuth = true) {\n    const headers = {\n      'Content-Type': 'application/json'\n    };\n    if (includeAuth && this.authService && this.authService.token) {\n      headers['Authorization'] = `Bearer ${this.authService.token}`;\n    }\n    return headers;\n  }\n\n  // Obtener lista de usuarios\n  async getUsers(page = 1, limit = 10, search = '', role = '') {\n    try {\n      const params = new URLSearchParams({\n        action: 'users',\n        page: page.toString(),\n        limit: limit.toString()\n      });\n      if (search) params.append('search', search);\n      if (role) params.append('role', role);\n      const response = await fetch(`${API_URL}?${params}`, {\n        method: 'GET',\n        headers: this.getHeaders()\n      });\n      const data = await response.json();\n      if (response.ok && data.success) {\n        return {\n          success: true,\n          users: data.users,\n          pagination: data.pagination\n        };\n      } else {\n        return {\n          success: false,\n          error: data.error || 'Error al obtener usuarios'\n        };\n      }\n    } catch (error) {\n      console.error('Error al obtener usuarios:', error);\n      return {\n        success: false,\n        error: 'Error de conexión con el servidor'\n      };\n    }\n  }\n\n  // Crear nuevo usuario\n  async createUser(userData) {\n    try {\n      const response = await fetch(`${API_URL}?action=create_user`, {\n        method: 'POST',\n        headers: this.getHeaders(),\n        body: JSON.stringify(userData)\n      });\n      const data = await response.json();\n      if (response.ok && data.success) {\n        return {\n          success: true,\n          message: data.message,\n          user_id: data.user_id\n        };\n      } else {\n        return {\n          success: false,\n          error: data.error || 'Error al crear usuario'\n        };\n      }\n    } catch (error) {\n      console.error('Error al crear usuario:', error);\n      return {\n        success: false,\n        error: 'Error de conexión con el servidor'\n      };\n    }\n  }\n\n  // Actualizar usuario\n  async updateUser(userId, userData) {\n    try {\n      const response = await fetch(`${API_URL}?action=update_user&user_id=${userId}`, {\n        method: 'PUT',\n        headers: this.getHeaders(),\n        body: JSON.stringify(userData)\n      });\n      const data = await response.json();\n      if (response.ok && data.success) {\n        return {\n          success: true,\n          message: data.message\n        };\n      } else {\n        return {\n          success: false,\n          error: data.error || 'Error al actualizar usuario'\n        };\n      }\n    } catch (error) {\n      console.error('Error al actualizar usuario:', error);\n      return {\n        success: false,\n        error: 'Error de conexión con el servidor'\n      };\n    }\n  }\n\n  // Eliminar (desactivar) usuario\n  async deleteUser(userId) {\n    try {\n      const response = await fetch(`${API_URL}?action=delete_user&user_id=${userId}`, {\n        method: 'DELETE',\n        headers: this.getHeaders()\n      });\n      const data = await response.json();\n      if (response.ok && data.success) {\n        return {\n          success: true,\n          message: data.message\n        };\n      } else {\n        return {\n          success: false,\n          error: data.error || 'Error al eliminar usuario'\n        };\n      }\n    } catch (error) {\n      console.error('Error al eliminar usuario:', error);\n      return {\n        success: false,\n        error: 'Error de conexión con el servidor'\n      };\n    }\n  }\n\n  // Obtener roles disponibles\n  async getRoles() {\n    try {\n      const response = await fetch(`${API_URL}?action=roles`, {\n        method: 'GET',\n        headers: this.getHeaders()\n      });\n      const data = await response.json();\n      if (response.ok && data.success) {\n        return {\n          success: true,\n          roles: data.roles\n        };\n      } else {\n        return {\n          success: false,\n          error: data.error || 'Error al obtener roles'\n        };\n      }\n    } catch (error) {\n      console.error('Error al obtener roles:', error);\n      return {\n        success: false,\n        error: 'Error de conexión con el servidor'\n      };\n    }\n  }\n\n  // Cambiar estado de usuario (activar/desactivar)\n  async toggleUserStatus(userId, active) {\n    try {\n      return await this.updateUser(userId, {\n        active\n      });\n    } catch (error) {\n      console.error('Error al cambiar estado de usuario:', error);\n      return {\n        success: false,\n        error: 'Error de conexión con el servidor'\n      };\n    }\n  }\n\n  // Validar datos de usuario\n  validateUserData(userData, isUpdate = false) {\n    const errors = [];\n    if (!isUpdate || userData.username) {\n      if (!userData.username || userData.username.trim().length < 3) {\n        errors.push('El nombre de usuario debe tener al menos 3 caracteres');\n      }\n    }\n    if (!isUpdate || userData.email) {\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n      if (!userData.email || !emailRegex.test(userData.email)) {\n        errors.push('Email inválido');\n      }\n    }\n    if (!isUpdate || userData.password) {\n      if (!isUpdate && (!userData.password || userData.password.length < 6)) {\n        errors.push('La contraseña debe tener al menos 6 caracteres');\n      } else if (isUpdate && userData.password && userData.password.length < 6) {\n        errors.push('La contraseña debe tener al menos 6 caracteres');\n      }\n    }\n    if (!isUpdate && (!userData.role_id || !Number.isInteger(userData.role_id))) {\n      errors.push('Debe seleccionar un rol válido');\n    }\n\n    // Validaciones específicas para doctores\n    if (userData.doctor_info) {\n      const doctorInfo = userData.doctor_info;\n      if (!doctorInfo.nombres || doctorInfo.nombres.trim().length < 2) {\n        errors.push('Los nombres del doctor deben tener al menos 2 caracteres');\n      }\n      if (!doctorInfo.apellidos || doctorInfo.apellidos.trim().length < 2) {\n        errors.push('Los apellidos del doctor deben tener al menos 2 caracteres');\n      }\n      if (!doctorInfo.dni || doctorInfo.dni.trim().length < 8) {\n        errors.push('El DNI del doctor debe tener al menos 8 caracteres');\n      }\n      if (!doctorInfo.colegiatura || doctorInfo.colegiatura.trim().length < 3) {\n        errors.push('La colegiatura del doctor debe tener al menos 3 caracteres');\n      }\n    }\n    return {\n      isValid: errors.length === 0,\n      errors\n    };\n  }\n\n  // Formatear usuario para mostrar\n  formatUserForDisplay(user) {\n    return {\n      id: user.id,\n      displayName: user.is_doctor && user.doctor_info ? `${user.doctor_info.nombres} ${user.doctor_info.apellidos}` : user.username,\n      username: user.username,\n      email: user.email,\n      role: user.role,\n      roleDescription: user.role_description,\n      active: user.active,\n      lastLogin: user.last_login ? new Date(user.last_login).toLocaleString('es-ES') : 'Nunca',\n      createdAt: user.created_at ? new Date(user.created_at).toLocaleDateString('es-ES') : '',\n      isDoctor: user.is_doctor,\n      doctorInfo: user.doctor_info\n    };\n  }\n\n  // Preparar datos para crear usuario\n  prepareUserDataForCreation(formData, selectedRole) {\n    const userData = {\n      username: formData.username.trim(),\n      email: formData.email.trim(),\n      password: formData.password,\n      role_id: selectedRole.id\n    };\n\n    // Si es doctor, agregar información del doctor\n    if (selectedRole.name === 'Doctor' && formData.doctorInfo) {\n      var _formData$doctorInfo$;\n      userData.doctor_info = {\n        nombres: formData.doctorInfo.nombres.trim(),\n        apellidos: formData.doctorInfo.apellidos.trim(),\n        dni: formData.doctorInfo.dni.trim(),\n        colegiatura: formData.doctorInfo.colegiatura.trim(),\n        telefono: ((_formData$doctorInfo$ = formData.doctorInfo.telefono) === null || _formData$doctorInfo$ === void 0 ? void 0 : _formData$doctorInfo$.trim()) || ''\n      };\n    }\n    return userData;\n  }\n}\n\n// Exportar una instancia única del servicio\nconst usersService = new UsersService();\nexport default usersService;","map":{"version":3,"names":["API_URL","UsersService","constructor","authService","setAuthService","getHeaders","includeAuth","headers","token","getUsers","page","limit","search","role","params","URLSearchParams","action","toString","append","response","fetch","method","data","json","ok","success","users","pagination","error","console","createUser","userData","body","JSON","stringify","message","user_id","updateUser","userId","deleteUser","getRoles","roles","toggleUserStatus","active","validateUserData","isUpdate","errors","username","trim","length","push","email","emailRegex","test","password","role_id","Number","isInteger","doctor_info","doctorInfo","nombres","apellidos","dni","colegiatura","isValid","formatUserForDisplay","user","id","displayName","is_doctor","roleDescription","role_description","lastLogin","last_login","Date","toLocaleString","createdAt","created_at","toLocaleDateString","isDoctor","prepareUserDataForCreation","formData","selectedRole","name","_formData$doctorInfo$","telefono","usersService"],"sources":["C:/Users/Usuario/Documents/GitHub/SISTEMA_DOCTOR_CONSULTORIO/src/services/usersService.js"],"sourcesContent":["// Servicio para gestión de usuarios (CRUD)\r\nconst API_URL = 'https://usuarios-1090334808863.us-central1.run.app';\r\n\r\nclass UsersService {\r\n  constructor() {\r\n    this.authService = null;\r\n  }\r\n\r\n  // Inyectar authService para obtener token\r\n  setAuthService(authService) {\r\n    this.authService = authService;\r\n  }\r\n\r\n  // Headers base para las peticiones\r\n  getHeaders(includeAuth = true) {\r\n    const headers = {\r\n      'Content-Type': 'application/json'\r\n    };\r\n\r\n    if (includeAuth && this.authService && this.authService.token) {\r\n      headers['Authorization'] = `Bearer ${this.authService.token}`;\r\n    }\r\n\r\n    return headers;\r\n  }\r\n\r\n  // Obtener lista de usuarios\r\n  async getUsers(page = 1, limit = 10, search = '', role = '') {\r\n    try {\r\n      const params = new URLSearchParams({\r\n        action: 'users',\r\n        page: page.toString(),\r\n        limit: limit.toString()\r\n      });\r\n\r\n      if (search) params.append('search', search);\r\n      if (role) params.append('role', role);\r\n\r\n      const response = await fetch(`${API_URL}?${params}`, {\r\n        method: 'GET',\r\n        headers: this.getHeaders()\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok && data.success) {\r\n        return {\r\n          success: true,\r\n          users: data.users,\r\n          pagination: data.pagination\r\n        };\r\n      } else {\r\n        return {\r\n          success: false,\r\n          error: data.error || 'Error al obtener usuarios'\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al obtener usuarios:', error);\r\n      return {\r\n        success: false,\r\n        error: 'Error de conexión con el servidor'\r\n      };\r\n    }\r\n  }\r\n\r\n  // Crear nuevo usuario\r\n  async createUser(userData) {\r\n    try {\r\n      const response = await fetch(`${API_URL}?action=create_user`, {\r\n        method: 'POST',\r\n        headers: this.getHeaders(),\r\n        body: JSON.stringify(userData)\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok && data.success) {\r\n        return {\r\n          success: true,\r\n          message: data.message,\r\n          user_id: data.user_id\r\n        };\r\n      } else {\r\n        return {\r\n          success: false,\r\n          error: data.error || 'Error al crear usuario'\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al crear usuario:', error);\r\n      return {\r\n        success: false,\r\n        error: 'Error de conexión con el servidor'\r\n      };\r\n    }\r\n  }\r\n\r\n  // Actualizar usuario\r\n  async updateUser(userId, userData) {\r\n    try {\r\n      const response = await fetch(`${API_URL}?action=update_user&user_id=${userId}`, {\r\n        method: 'PUT',\r\n        headers: this.getHeaders(),\r\n        body: JSON.stringify(userData)\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok && data.success) {\r\n        return {\r\n          success: true,\r\n          message: data.message\r\n        };\r\n      } else {\r\n        return {\r\n          success: false,\r\n          error: data.error || 'Error al actualizar usuario'\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al actualizar usuario:', error);\r\n      return {\r\n        success: false,\r\n        error: 'Error de conexión con el servidor'\r\n      };\r\n    }\r\n  }\r\n\r\n  // Eliminar (desactivar) usuario\r\n  async deleteUser(userId) {\r\n    try {\r\n      const response = await fetch(`${API_URL}?action=delete_user&user_id=${userId}`, {\r\n        method: 'DELETE',\r\n        headers: this.getHeaders()\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok && data.success) {\r\n        return {\r\n          success: true,\r\n          message: data.message\r\n        };\r\n      } else {\r\n        return {\r\n          success: false,\r\n          error: data.error || 'Error al eliminar usuario'\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al eliminar usuario:', error);\r\n      return {\r\n        success: false,\r\n        error: 'Error de conexión con el servidor'\r\n      };\r\n    }\r\n  }\r\n\r\n  // Obtener roles disponibles\r\n  async getRoles() {\r\n    try {\r\n      const response = await fetch(`${API_URL}?action=roles`, {\r\n        method: 'GET',\r\n        headers: this.getHeaders()\r\n      });\r\n\r\n      const data = await response.json();\r\n\r\n      if (response.ok && data.success) {\r\n        return {\r\n          success: true,\r\n          roles: data.roles\r\n        };\r\n      } else {\r\n        return {\r\n          success: false,\r\n          error: data.error || 'Error al obtener roles'\r\n        };\r\n      }\r\n    } catch (error) {\r\n      console.error('Error al obtener roles:', error);\r\n      return {\r\n        success: false,\r\n        error: 'Error de conexión con el servidor'\r\n      };\r\n    }\r\n  }\r\n\r\n  // Cambiar estado de usuario (activar/desactivar)\r\n  async toggleUserStatus(userId, active) {\r\n    try {\r\n      return await this.updateUser(userId, { active });\r\n    } catch (error) {\r\n      console.error('Error al cambiar estado de usuario:', error);\r\n      return {\r\n        success: false,\r\n        error: 'Error de conexión con el servidor'\r\n      };\r\n    }\r\n  }\r\n\r\n  // Validar datos de usuario\r\n  validateUserData(userData, isUpdate = false) {\r\n    const errors = [];\r\n\r\n    if (!isUpdate || userData.username) {\r\n      if (!userData.username || userData.username.trim().length < 3) {\r\n        errors.push('El nombre de usuario debe tener al menos 3 caracteres');\r\n      }\r\n    }\r\n\r\n    if (!isUpdate || userData.email) {\r\n      const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n      if (!userData.email || !emailRegex.test(userData.email)) {\r\n        errors.push('Email inválido');\r\n      }\r\n    }\r\n\r\n    if (!isUpdate || userData.password) {\r\n      if (!isUpdate && (!userData.password || userData.password.length < 6)) {\r\n        errors.push('La contraseña debe tener al menos 6 caracteres');\r\n      } else if (isUpdate && userData.password && userData.password.length < 6) {\r\n        errors.push('La contraseña debe tener al menos 6 caracteres');\r\n      }\r\n    }\r\n\r\n    if (!isUpdate && (!userData.role_id || !Number.isInteger(userData.role_id))) {\r\n      errors.push('Debe seleccionar un rol válido');\r\n    }\r\n\r\n    // Validaciones específicas para doctores\r\n    if (userData.doctor_info) {\r\n      const doctorInfo = userData.doctor_info;\r\n      \r\n      if (!doctorInfo.nombres || doctorInfo.nombres.trim().length < 2) {\r\n        errors.push('Los nombres del doctor deben tener al menos 2 caracteres');\r\n      }\r\n      \r\n      if (!doctorInfo.apellidos || doctorInfo.apellidos.trim().length < 2) {\r\n        errors.push('Los apellidos del doctor deben tener al menos 2 caracteres');\r\n      }\r\n      \r\n      if (!doctorInfo.dni || doctorInfo.dni.trim().length < 8) {\r\n        errors.push('El DNI del doctor debe tener al menos 8 caracteres');\r\n      }\r\n      \r\n      if (!doctorInfo.colegiatura || doctorInfo.colegiatura.trim().length < 3) {\r\n        errors.push('La colegiatura del doctor debe tener al menos 3 caracteres');\r\n      }\r\n    }\r\n\r\n    return {\r\n      isValid: errors.length === 0,\r\n      errors\r\n    };\r\n  }\r\n\r\n  // Formatear usuario para mostrar\r\n  formatUserForDisplay(user) {\r\n    return {\r\n      id: user.id,\r\n      displayName: user.is_doctor && user.doctor_info ? \r\n        `${user.doctor_info.nombres} ${user.doctor_info.apellidos}` : \r\n        user.username,\r\n      username: user.username,\r\n      email: user.email,\r\n      role: user.role,\r\n      roleDescription: user.role_description,\r\n      active: user.active,\r\n      lastLogin: user.last_login ? new Date(user.last_login).toLocaleString('es-ES') : 'Nunca',\r\n      createdAt: user.created_at ? new Date(user.created_at).toLocaleDateString('es-ES') : '',\r\n      isDoctor: user.is_doctor,\r\n      doctorInfo: user.doctor_info\r\n    };\r\n  }\r\n\r\n  // Preparar datos para crear usuario\r\n  prepareUserDataForCreation(formData, selectedRole) {\r\n    const userData = {\r\n      username: formData.username.trim(),\r\n      email: formData.email.trim(),\r\n      password: formData.password,\r\n      role_id: selectedRole.id\r\n    };\r\n\r\n    // Si es doctor, agregar información del doctor\r\n    if (selectedRole.name === 'Doctor' && formData.doctorInfo) {\r\n      userData.doctor_info = {\r\n        nombres: formData.doctorInfo.nombres.trim(),\r\n        apellidos: formData.doctorInfo.apellidos.trim(),\r\n        dni: formData.doctorInfo.dni.trim(),\r\n        colegiatura: formData.doctorInfo.colegiatura.trim(),\r\n        telefono: formData.doctorInfo.telefono?.trim() || ''\r\n      };\r\n    }\r\n\r\n    return userData;\r\n  }\r\n}\r\n\r\n// Exportar una instancia única del servicio\r\nconst usersService = new UsersService();\r\nexport default usersService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}